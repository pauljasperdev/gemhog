---
phase: 03.4-integration-test-coverage
plan: 05
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/web/tests/e2e/auth.e2e.test.ts
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "E2E test navigates to signup page and fills form"
    - "E2E test submits signup and verifies redirect to dashboard"
    - "E2E test navigates to signin page and authenticates"
    - "E2E test verifies signin redirects to dashboard with user context"
  artifacts:
    - path: "apps/web/tests/e2e/auth.e2e.test.ts"
      provides: "Playwright E2E tests for auth flows"
      min_lines: 60
---

<objective>
Add E2E tests for signup and signin flows

Purpose: Test the actual UI auth flows through Playwright - filling forms, submitting, and verifying redirects. This complements the integration tests which test the API directly.

Output: New auth.e2e.test.ts with Playwright tests for signup and signin UI flows.

**Gap identified:** Integration tests cover auth API, but no E2E tests verify the actual UI forms work.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@apps/web/tests/e2e/fixtures.ts
@apps/web/tests/e2e/home.e2e.test.ts
@packages/core/src/auth/test-fixtures.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create E2E auth tests</name>
  <files>apps/web/tests/e2e/auth.e2e.test.ts</files>
  <action>
Create Playwright E2E tests for auth flows.

Use the extended test fixture from fixtures.ts that captures console errors.

Test cases:
1. Signup flow:
   - Navigate to /signup (or wherever signup form lives)
   - Fill email, password, name fields
   - Submit form
   - Verify redirect to dashboard or success page
   - Verify no console errors

2. Signin flow:
   - First create a user via signup (or use test API)
   - Navigate to /signin
   - Fill email, password
   - Submit form
   - Verify redirect to dashboard
   - Verify user context (name displayed, etc.)

**Important:**
- Use unique emails per test run (e.g., `test-${Date.now()}@example.com`)
- The auth forms may be at different routes - check the actual app routes first
- Use the error detection fixture to catch console errors
- Tests should be independent (each creates its own user)

If signup/signin pages don't exist yet, create minimal test that documents what's needed:
```typescript
test.skip("signup flow - page not implemented", async ({ page }) => {
  // TODO: Implement when /signup page exists
});
```
  </action>
  <verify>Run `pnpm test:e2e` and verify auth.e2e.test.ts passes (or skips with documented reason)</verify>
  <done>auth.e2e.test.ts exists with signup and signin E2E tests</done>
</task>

</tasks>

<verification>
1. Run `pnpm test:e2e` - auth.e2e.test.ts passes or skips with clear reason
2. If tests run: verify they use unique emails, check redirects, use error fixture
3. Type check passes: `pnpm check-types`
</verification>

<success_criteria>
- auth.e2e.test.ts has E2E tests for signup and signin flows
- Tests use error detection fixture from fixtures.ts
- Tests are independent (unique emails per run)
- All E2E tests pass
</success_criteria>

<output>
After completion, create `.planning/phases/03.4-integration-test-coverage/03.4-05-SUMMARY.md`
</output>
