---
phase: 03.4-integration-test-coverage
plan: 05
subsystem: testing
tags: [playwright, e2e, auth, signup, signin]

# Dependency graph
requires:
  - phase: 03.4-integration-test-coverage
    provides: Auth integration tests and test fixtures
provides:
  - E2E Playwright tests for signup UI flow
  - E2E Playwright tests for signin UI flow
  - Validation error testing for auth forms
affects: []

# Tech tracking
tech-stack:
  added: []
  patterns:
    - Form-scoped selectors for avoiding navbar button conflicts
    - Unique email generation per test for isolation

key-files:
  created:
    - apps/web/tests/e2e/auth.e2e.test.ts
  modified: []

key-decisions:
  - "Use form-scoped selectors (page.locator('form').getByRole()) to avoid conflicts with navbar Sign In button"
  - "Generate unique emails with timestamp + random suffix for test isolation"

patterns-established:
  - "E2E auth test pattern: unique email, fill form via locator, submit via form-scoped button, verify dashboard redirect"

# Metrics
duration: 4min
completed: 2026-01-22
---

# Phase 03.4 Plan 05: E2E Auth Tests Summary

**Playwright E2E tests for signup and signin UI flows with form validation error testing**

## Performance

- **Duration:** 4 min
- **Started:** 2026-01-22T18:18:51Z
- **Completed:** 2026-01-22T18:22:27Z
- **Tasks:** 1
- **Files created:** 1

## Accomplishments

- Added E2E test for complete signup flow (form fill, submit, dashboard redirect, user context verification)
- Added E2E test for signup validation (short password shows error, stays on login page)
- Added E2E test for signin flow (create account first, then signin, verify dashboard)
- Added E2E test for invalid signin credentials (stays on login page)
- All tests use error detection fixture from fixtures.ts

## Task Commits

Each task was committed atomically:

1. **Task 1: Create E2E auth tests** - `5691cf5` (test)

## Files Created/Modified

- `apps/web/tests/e2e/auth.e2e.test.ts` - Playwright E2E tests for signup and signin auth flows

## Decisions Made

1. **Form-scoped selectors for submit buttons** - The page has both a navbar "Sign In" button and a form submit button. Using `page.locator("form").getByRole("button", { name: "Sign In" })` ensures we click the correct one.

2. **Unique email generation pattern** - Each test generates a unique email using `test-${Date.now()}-${Math.random().toString(36).slice(2, 8)}@example.com` to ensure test isolation and avoid conflicts.

3. **Signin test creates account first** - Rather than depending on pre-existing test data, the signin test creates its own account via the signup flow first, then signs in.

## Deviations from Plan

### Auto-fixed Issues

**1. [Rule 3 - Blocking] Fixed button selector ambiguity**
- **Found during:** Task 1 (initial test run)
- **Issue:** `getByRole('button', { name: 'Sign In' })` matched both navbar button and form submit button
- **Fix:** Changed to form-scoped selector `page.locator('form').getByRole('button', { name: 'Sign In' })`
- **Files modified:** apps/web/tests/e2e/auth.e2e.test.ts
- **Verification:** All 6 E2E tests pass
- **Committed in:** 5691cf5

---

**Total deviations:** 1 auto-fixed (1 blocking)
**Impact on plan:** Auto-fix necessary to make tests work correctly with actual page structure. No scope creep.

## Issues Encountered

- Database credentials mismatch between Playwright config (postgres/postgres) and actual Docker container (postgres/password). E2E tests ran successfully once DATABASE_URL was set correctly.

## User Setup Required

None - no external service configuration required.

## Next Phase Readiness

- E2E auth test coverage complete
- All 6 E2E tests pass (2 homepage + 4 auth)
- Gap closure plan 05 complete

---
*Phase: 03.4-integration-test-coverage*
*Completed: 2026-01-22*
