# lefthook.yml
# Commit-msg hook runs checks unless it's a docs commit
commit-msg:
  parallel: true
  commands:
    biome:
      glob: "*.{js,ts,cjs,mjs,jsx,tsx,json,jsonc}"
      run:
        bash -c 'if grep -qE "^docs" "$1"; then exit 0; fi; npx biome check
        --no-errors-on-unmatched --files-ignore-unknown=true {staged_files}'
        bash {1}
    typecheck:
      run:
        bash -c 'if grep -qE "^docs" "$1"; then exit 0; fi; pnpm -r check-types'
        bash {1}

# Post-checkout hook for dependency updates (optional quality of life)
post-checkout:
  commands:
    install:
      run: pnpm install --frozen-lockfile
      skip:
        - rebase
        - merge
